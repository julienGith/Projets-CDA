@model OPS2020.Models.QuestionnaireModel
@{
    ViewData["Title"] = "TestQuest";
}

<style>
    .rotate {
        -moz-transition: all .2s linear;
        -webkit-transition: all .2s linear;
        transition: all .2s linear;
    }

    .questIntitule {
        width: 350px;
        overflow-x: scroll;
        overflow-x: hidden;
    }

    .rotate.down {
        -ms-transform: rotate(180deg);
        -moz-transform: rotate(180deg);
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
    }

    ul {
        list-style-type: none;
    }

    a.disabled {
        pointer-events: none;
        cursor: default;
    }

    /*TABS*/
    /* Style the form */
    /*#regForm {
        background-color: #ffffff;
        margin: 100px auto;
        padding: 40px;
        width: 70%;
        min-width: 300px;
    }*/

    /* Style the input fields */
    /*input {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
    }*/

    /* Mark input boxes that gets an error on validation: */
    input.invalid {
        background-color: #ffdddd;
    }

    /* Hide all steps by default: */
    .tab {
        display: none;
    }

    /* Make circles that indicate the steps of the form: */
    .step {
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;
        border-radius: 50%;
        display: inline-block;
        opacity: 0.5;
    }

        /* Mark the active step: */
        .step.active {
            opacity: 1;
        }

        /* Mark the steps that are finished and valid: */
        .step.finish {
            background-color: #4CAF50;
        }
</style>
<div class="row">
    <div class="col align-self-center">
        <div class="jumbotron">
            <img src="~/Images/afpa-logo-cell.png" class="img-fluid"/>
            <p class="lead">Test de l'enquête sur l'insertion des anciens stagiaires.</p>
            <p class="lead">@Model.LibelleProduitFormation</p>
        </div>
    </div>
</div>
<div class="row">
    <div class="col align-self-center">
        <div class="card">
            <div class="card-header">
                Ênquête insertion @Model.LibelleProduitFormation
            </div>
            <div class="card-body">
                <div id="previewQuestionnaire">
                    <form id="regForm" action="" class="form-horizontal">
                        <fieldset>
                            <legend id="formName">Form Name</legend>
                            <div id="previewQuestions">


                            </div>
                        </fieldset>
                        <div style="overflow:auto;">
                            <div style="float:right;">
                                <button type="button" id="prevBtn" class="btn btn-primary" onclick="nextPrev(-1); return false;">Précédent</button>
                                <button type="button" id="nextBtn" class="btn btn-primary" onclick="nextPrev(1); return false;">Suivant</button>
                            </div>
                        </div>

                        <!-- Circles which indicates the steps of the form: -->
                        <div id="listCercles" style="text-align:center;margin-top:40px;">

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>




<span id="idQuestionnaire" data-count="@Model.questionnaireId"></span>
<script>
    var C = console.log;
    var currentTab = 0; // Current tab is set to be the first tab (0)

    // tabs source https://www.w3schools.com/howto/howto_js_form_steps.asp
    function nextPrev(n) {
        $(document.body).ready(function () {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            C("x", x);
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form... :
            if (currentTab >= x.length) {
                //...the form gets submitted:
                document.getElementById("regForm").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
        });

    }
    function validateForm() {
        // This function deals with validation of the form fields
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
            // If a field is empty...
            if (y[i].value == "") {
                // add an "invalid" class to the field:
                y[i].className += " invalid";
                // and set the current valid status to false:
                valid = false;
            }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
    }
    function showTab(n) {
        $(document.body).ready(function () {
            C("currentTabIndex", n);
            // This function will display the specified tab of the form ...
            var x = [''];
            x = document.getElementsByClassName("tab");
            C("var tabArray", x);
            x[n].style.display = "block";
            // ... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Valider";
            } else {
                document.getElementById("nextBtn").innerHTML = "Suivant";
            }
            // ... and run a function that displays the correct step indicator:
            fixStepIndicator(n)
        });

    }

    function fixStepIndicator(n) {
        $(document.body).ready(function () {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class to the current step:
            x[n].className += " active";
        });

    }

    //$('#sortable').sortable();
    $(document.body).ready(function () {

    });
    $(document.body).ready(function () {

    });



    $(document.body).ready(function () {

    });

    $(document.body).on('click', '.element', function (e) { });

    //$(document.body).on('click', '.rotate', function () { $(this).toggleClass("down"); });

    $(document).ready(function () {
       // "use strict";
        $(document.body).on('click', '#ordreBtn', function () {
            //alert($("#sortable").sortable('toArray'));
            //C(productOrder);
            C("Test Toggle");

            $("#toggle1").wrap("<div class='radio'></div>");
            $("#toggle2").wrap("<div class='radio'></div>");
        })

        var C = console.log;

        var numQuestion = 0;
        var codeQuestion;
        var type;
        var choixRequis;
        var ajoutSupprChoix;
        var questionnaire = {
            codeProduitFormation: '',
            questionnaireId: '',
            titreQuestionnaire: '',
            description: '',
            dataJson: [''],
            etatQuestionnaire: '',
            codeHtml:'',
            listQuestObj: ['']
        }




        C(@Model.questionnaireId);
        //Chargement du questionnaire
        $(document.body).ready(function () {
            if ($("#idQuestionnaire").data("count") != 0) {
                C("Chargement questionnaire");
                questionnaire = @Html.Raw(Json.Serialize(Model));
                // Remplissage propriétés du questionnaire
                $("#titreTxtB").val(questionnaire.titreQuestionnaire);
                $("#descriptionTxtA").val(questionnaire.description);
                $("#formName").html(questionnaire.titreQuestionnaire);
                $("#titreDiv").html(questionnaire.titreQuestionnaire);
                C(questionnaire);
                questionnaire.listQuestObj = filter_array_values(questionnaire.listQuestObj);
                C("liste questionOBJ", questionnaire.listQuestObj);
                // Boucle chargement question
                for (let x of questionnaire.listQuestObj) {
                    C("Boucle chargement");
                    $("#listCercles").append("<span class='step'></span>")
                    AppendPrev(x);
                    x.listUserItems = filter_array_values(x.listUserItems);
                    C("liste usersItem", x.listUserItems);
                    // Boucle Chargement des items de la question en cours
                    for (let y of x.listUserItems) {
                        C("Boucle chargement usertItems");
                        C("UserItem", y);
                        if (x.modifUser = true) {
                            $(document.body).ready(function () {
                                $(".exemple").remove();
                                $(".exemplechk").remove();
                                $(".exemplelst").remove();
                            //let idUl = "";
                            //let idListItem = "";
                            let lblPrev = "";
                            //    let txtBintituleId = "";
                                CreerItemPreview(x,y);
                            idUl = "#" + x.itemUlId;
                            lblPrev = "#" + y.itemPrev.lbl;
                            txtBintituleId = "#" + y.txtBId;
                            $(idUl).append(y.codeHtml);
                            $(lblPrev).append(y.intitule);
                            $(txtBintituleId).val(y.intitule);
                                C("Intitule", y.intitule);
                            })
                        }
                    }
                }
            }
            //TABS

            showTab(currentTab); // Display the current tab


        })

        // Génère le code html pour les valeurs possibles ajoutés par l'utilisateur
        function CreerUserItem(questionObj, userItem) {
            let idUl = "#" + questionObj.itemUlId;
            if (questionObj.type == "Nrep") {
                userItem.codeHtml = "<li class='list-inline-item form-inline justify-content-center mb-2'>" +
                    "<div class='d-inline'><input type='checkbox' name='item' class='ml-2' disabled/></div>" +
                    "<div class='d-inline'><input class='form-control item-text' id=" + userItem.txtBId + " type='text'/></div> <div class='d-inline ml-2'>" +
                    "<button><i href='#' id=" + userItem.id + " class='fas fa-trash-alt suppr-item'></i></button></div ></li> ";
                $(".exemplechk").fadeOut(400, function () { $(this).remove(); });
                $(idUl).fadeIn(300, function () {
                    $(this).append(userItem.codeHtml);
                });
            }
            if (questionObj.type == "1rep") {
                userItem.codeHtml = "<li class='list-inline-item form-inline justify-content-center mb-2'>" +
                    "<div class='d-inline'><input type='radio' name='item' class='ml-2' disabled/></div>" +
                    "<div class='d-inline'><input class='form-control item-text' id=" + userItem.txtBId + " type='text'/></div> <div class='d-inline ml-2'>" +
                    "<button><i href='#' id=" + userItem.id + " class='fas fa-trash-alt suppr-item'></i></button></div ></li> ";
                $(".exemple").fadeOut(400, function () { $(this).remove(); });
                $(idUl).fadeIn(300, function () {
                    $(this).append(userItem.codeHtml);
                });
            }
            if (questionObj.type == "1repListe") {
                userItem.codeHtml = "<li class='list-inline-item form-inline justify-content-center mb-2'>" +
                    "<div class='d-inline'><input type='radio' name='item' class='ml-2' disabled/></div>" +
                    "<div class='d-inline'><input class='form-control item-text' id=" + userItem.txtBId + " type='text'/></div> <div class='d-inline ml-2'>" +
                    "<button><i href='#' id=" + userItem.id + " class='fas fa-trash-alt suppr-item'></i></button></div ></li> ";
                $(idUl).fadeIn(300, function () {
                    $(this).append(userItem.codeHtml);
                    $(".exemplelst").remove();
                });
            }
        }
        // Génère le code html pour la card de gestion de la question
        function CreerQuestion(questionObj) {
            C("objet reçu", questionObj);
            C("CreaQuest type : ", questionObj.type);
            C("targetID",questionObj.targetId);
            if (questionObj.type == "1repListe") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div id=" + questionObj.targetId + " class='collapse'>" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm ajout-radio' id=" + questionObj.ajouterBtnId + "/></div></div>" +
                    "<div class='col-md- 4'>"+
                    "<select id='selectbasic' name='selectbasic' class='form-control' disabled >"+
                    "<option value='1'>Option one</option>"+
                    "<option value='2'>Option two</option>"+
                    "</select>" +
                    "<ul class='pl-0 mt-2' id=" + questionObj.itemUlId + "></ul>" +
                    "</div>");


            }
            if (questionObj.type == "Nrep") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption'>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm ajout-radio' id=" + questionObj.ajouterBtnId + " /></div></div>" +
                    "<ul class='pl-0 mt-2' id=" + questionObj.itemUlId + ">" +
                    "<li class='form-inline justify-content-center mb-2 exemplechk'><div class='d-inline'><input type='checkbox' name='item' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='item1' disabled/></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li>" +
                    "<li class='form-inline justify-content-center mb-2 exemplechk'><div class='d-inline'><input type='checkbox' name='item' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='item2' disabled/></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li></ul></div></div></div></li>");

            }
            if (questionObj.type == "ValNum") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<input id='textinput' name='textinput' type='text' class='form-control input-md'disabled>");


            }
            if (questionObj.type == "4niv") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<div class='row justify-content-center mt-2'>" +
                    "<label class='radio-inline mr-2' for='radio'>" +
                    "<input type='radio' id='radio' value='1' disabled>" +
                    "peu satisfait" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio2'>" +
                    "<input type='radio' id='radio2' value='1' disabled>" +
                    "moyennement satisfait" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio3'>" +
                    "<input type='radio' id='radio3' value='1' disabled>" +
                    "satisfait" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio4'>" +
                    "<input type='radio' id='radio4' value='1' disabled>" +
                    "très satisfait" +
                    "</label></div>");
            }
            if (questionObj.type == "1rep") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption'>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm ajout-radio' id=" + questionObj.ajouterBtnId + " /></div></div>" +
                    "<ul class='pl-0 mt-2' id=" + questionObj.itemUlId + ">" +
                    "<li class='form-inline justify-content-center mb-2 exemple'><div class='d-inline'><input type='radio' name='item' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='item1' disabled/></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li>" +
                    "<li class='form-inline justify-content-center mb-2 exemple'><div class='d-inline'><input type='radio' name='item' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='item2' disabled/></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li></ul></div></div></div></li>");

            }
            if (questionObj.type == "TxtL") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='1'>Colonne</option>" +
                    "<option selected value='2'>Ligne</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div>" +
                    "<div class='row h-25'><textarea id='textinput' name='textinput' rows='3' class='form-control' disabled></textarea></div>");

            }
            if (questionObj.type == "OuiNon") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption'>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<ul class='pl-0 mt-2' id=" + questionObj.itemUlId + ">" +
                    "<li class='form-inline justify-content-center mb-2'><div class='d-inline'><input type='radio' name='item' id='option1' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='Oui' disabled /></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li>" +
                    "<li class='form-inline justify-content-center mb-2'><div class='d-inline'><input type='radio' name='item' id='option1' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='Non' disabled /></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li></ul></div></div></div></li>");
            }
            if (questionObj.type == "OuiNonNsp") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId +" class='btn-sm graphOption'>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<ul class='pl-0 mt-2' id=" + questionObj.itemUlId + ">" +
                    "<li class='form-inline justify-content-center mb-2'><div class='d-inline'><input type='radio' name='item' id='option1' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='Oui' disabled /></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li>" +
                    "<li class='form-inline justify-content-center mb-2'><div class='d-inline'><input type='radio' name='item' id='option1' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='Non' disabled /></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li>" +
                    "<li class='form-inline justify-content-center mb-2'><div class='d-inline'><input type='radio' name='item' id='option1' class='d-inline ml-2' disabled /></div><div width='50' class='d-inline'><input class='form-control' type='text' value='Ne sais pas' disabled /></div><div class='d-inline ml-2'><button disabled><i href='#' class='fas fa-trash-alt'></i></button></div></li></ul></div></div></div></li>");

            }
            if (questionObj.type == "1a10") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='Jauge'>Jauge</option>" +
                    "<option value='Colonnes'>Colonnes</option>" +
                    "<option value='Camembert'>Camembert</option>" +
                    "<option selected value='Barre'>Barre</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<div class='row justify-content-center mt-2'>" +
                    "<label class='radio-inline mr-2' for='radio'>" +
                    "<input type='radio' id='radio' value='1' disabled>" +
                    "1" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio2'>" +
                    "<input type='radio' id='radio2' value='1' disabled>" +
                    "2" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio3'>" +
                    "<input type='radio' id='radio3' value='1' disabled>" +
                    "3" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio4'>" +
                    "<input type='radio' id='radio4' value='1' disabled>" +
                    "4" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio5'>" +
                    "<input type='radio' id='radio5' value='1' checked='checked' disabled>" +
                    "5" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio6'>" +
                    "<input type='radio' id='radio6' value='1' disabled>" +
                    "6" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio7'>" +
                    "<input type='radio' id='radio7' value='1' disabled>" +
                    "7" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio8'>" +
                    "<input type='radio' id='radio8' value='1' disabled>" +
                    "8" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio9'>" +
                    "<input type='radio' id='radio9' value='1' disabled>" +
                    "9" +
                    "</label>" +
                    "<label class='radio-inline mr-2' for='radio10'>" +
                    "<input type='radio' id='radio10' value='1' disabled>" +
                    "10" +
                    "</label></div>");
            }
            if (questionObj.type == "TxtC") {
                $("#sortable").append("<li id=" + questionObj.questionId + "><div class='card'><div class='card-header'><div class='row justify-content-between align-items-center btn-sm'>" +
                    "<div class='align-self-end questIntitule' id=" + questionObj.intituleDivBId + ">" + questionObj.intitule + "</div>" +
                    "<div class='ml-auto align-self-start'>" +
                    "<i class='fa fa-chevron-up ml-3 rotate' data-toggle='collapse' data-target=" + questionObj.dataTarget + " aria-expanded='false' aria-controls='collapseExample'></i>" +
                    "<i class='fas fa-arrows-alt ml-2'></i>" +
                    "<i id=" + questionObj.trashIconId + " class='fas fa-trash-alt ml-2 trash' data-toggle='modal' data-target='#supprModal'></i></div></div></div>" +
                    "<div class='collapse' id=" + questionObj.targetId + ">" +
                    "<div class='card card-body'>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Intitulé de la question :</div>" +
                    "<div class='d-inline ml-2'><input class='form-control intituleTxtB' placeholder='Intitulé' type='text' id=" + questionObj.intituleTxtBId + " /></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Réponse obligatoire : </div>" +
                    "<div class='d-inline ml-2'><div class='form-check-inline'><label>" +
                    "<input class='form-check-input requis' type='radio' value='true' name=" + questionObj.questionId + " id=" + questionObj.requisOuiRadioId + " checked> Oui</label>" +
                    "<label><input class='form-check-input ml-5 requis' type='radio' value='false' name=" + questionObj.questionId + " id=" + questionObj.requisNonRadioId + "> Non</label></div></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Type de graphique :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<select id=" + questionObj.graphiqueId + " class='btn-sm graphOption' disabled>" +
                    "<option value='1'>Colonne</option>" +
                    "<option selected value='2'>Ligne</option></select></div></div>" +
                    "<div class='row mt-2 justify-content-center'>" +
                    "<div class='d-inline'>Valeurs possibles :</div>" +
                    "<div class='d-inline ml-2'>" +
                    "<input type='button' value='Ajouter un item' class='btn-sm' disabled /></div></div>" +
                    "<input id='textinput' name='textinput' type='text' class='form-control input-md'disabled>");


            }
        }
        // Génère le code html des valeurs possible de la question
        function CreerItemPreview(questionObj, userItem) {
            C("CreerPreviewItem");
            if (questionObj.type == "1repListe") {
                if (userItem != null) {
                    C("CreerPreviewItem 1Repliste");
                    userItem.itemPrev.id = userItem.idPreview;
                    userItem.itemPrev.lbl = "Lbl" + userItem.idPreview;
                    var idLabel = "#" + userItem.itemPrev.lbl;
                    var listItemId = "#" + questionObj.divListItemId;
                    userItem.itemPrev.codeHtml = "<option id=" + userItem.itemPrev.lbl + ">" + "option" + "</option>";
                    if (questionObj.requis == "false") {
                        $(listItemId).prop('required', false);
                    }
                    if (questionObj.requis == "true") {
                        $(listItemId).prop('required', true);
                    }
                    $(listItemId).append(userItem.itemPrev.codeHtml);

                }
            }
            if (questionObj.type == "Nrep") {
                if (userItem != null) {
                    C("CreerPreviewItem NRep");
                    userItem.itemPrev.id = userItem.idPreview;
                    userItem.itemPrev.lbl = "Lbl" + userItem.idPreview;
                    var idLabel = "#" + userItem.itemPrev.lbl;
                    var listItemId = "#" + questionObj.divListItemId;
                    C(questionObj.graphique);
                    userItem.itemPrev.codeHtml = "<div class='checkbox'>" +
                        "<input type='checkbox' name=" + userItem.itemPrev.groupName + " id=" + userItem.itemPrev.id + " class='mr-1' required>" +
                        "<label id=" + userItem.itemPrev.lbl + " for=" + userItem.itemPrev.id + "></label></div> ";
                    $(listItemId).append(userItem.itemPrev.codeHtml);
                    $(document.body).ready(function () {
                        if (questionObj.graphique == 1) {
                            $(idLabel).parent().toggleClass("d-inline", false);
                            $(idLabel).parent().toggleClass("checkbox", true);
                        }
                        if (questionObj.graphique == 2) {
                            $(idLabel).parent().toggleClass("checkbox", false);
                            $(idLabel).parent().toggleClass("d-inline mr-2", true);
                        }
                        if (questionObj.requis == "false") {
                            $(idLabel).children().prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            $(idLabel).children().prop('required', true);
                        }
                    });
                }
                else {
                    C("Liste UserItems", questionObj.listUserItems);
                    questionObj.listUserItems = filter_array_values(questionObj.listUserItems);
                    for (var i = 0; i < questionObj.listUserItems.length; i++) {
                        var userItem = new UserItem();
                        var item = new Item();
                            userItem = questionObj.listUserItems[i];
                            item = userItem.itemPrev;
                            C(item);
                            var idInput = "#" + item.id;
                            if (questionObj.graphique == 1) {
                                $(idInput).parent().toggleClass("d-inline", false);
                                $(idInput).parent().toggleClass("checkbox", true);
                            }
                            if (questionObj.graphique == 2) {
                                $(idInput).parent().toggleClass("checkbox", false);
                                $(idInput).parent().toggleClass("d-inline mr-2", true);
                            }
                            if (questionObj.requis == "false") {
                                $(idInput).prop('required', false);
                            }
                            if (questionObj.requis == "true") {
                                $(idInput).prop('required', true);
                            }
                    }

                }

            }
            if (questionObj.type == "1rep") {
                C("CreerPreviewItem 1Rep");
                C(questionObj);
                if (userItem != null) {
                    C("item prev lbl ", userItem.itemPrev.lbl);

                        C("Item creation preview")
                        userItem.itemPrev.id = userItem.idPreview;
                        userItem.itemPrev.lbl = "Lbl" + userItem.idPreview;
                        userItem.itemPrev.codeHtml = "<div class='radio'>" +
                            "<input type='radio' name=" + userItem.itemPrev.groupName + " id=" + userItem.itemPrev.id + " class='mr-1' required>" +
                            "<label id=" + userItem.itemPrev.lbl + " for=" + userItem.itemPrev.id + "></label></div> ";


                    var idLabel = "#" + userItem.itemPrev.lbl;
                    C(questionObj.graphique);
                    let idListItem = "#" + questionObj.divListItemId;
                    $(idListItem).append(userItem.itemPrev.codeHtml);
                    C("Etat requis : ", questionObj.requis);
                    $(document.body).ready(function () {
                        if (questionObj.graphique == 1) {
                            $(idLabel).parent().toggleClass("d-inline", false);
                            $(idLabel).parent().toggleClass("radio", true);
                        }
                        if (questionObj.graphique == 2) {
                            $(idLabel).parent().toggleClass("radio", false);
                            $(idLabel).parent().toggleClass("d-inline mr-2", true);
                        }
                        if (questionObj.requis == "false") {
                            C("requis false")
                            $(idLabel).parent().prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            $(idLabel).parent().prop('required', true);
                        }
                    });
                    }
                    else {
                    C("Liste UserItems", questionObj.listUserItems);
                    questionObj.listUserItems = filter_array_values(questionObj.listUserItems);
                    for (var i = 0; i < questionObj.listUserItems.length; i++) {
                        var userItem = new UserItem();
                        var item = new Item();
                        userItem = questionObj.listUserItems[i];
                        item = userItem.itemPrev;
                        C(item);
                        var idInput = "#" + item.id;
                        if (questionObj.graphique == 1) {
                            $(idInput).parent().toggleClass("d-inline", false);
                            $(idInput).parent().toggleClass("checkbox", true);
                        }
                        if (questionObj.graphique == 2) {
                            $(idInput).parent().toggleClass("checkbox", false);
                            $(idInput).parent().toggleClass("d-inline mr-2", true);
                        }
                        if (questionObj.requis == "false") {
                            $(idInput).prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            $(idInput).prop('required', true);
                        }
                    }

                }
            }
            C("Liste UserItems après ajout :", questionObj.listUserItems);
        }
        // Génère le code html pour l'aperçu de la question
        function CreerPreview(questionObj) {
            C("objet recup pour preview", questionObj);
            console.log("creer preview");
            var qPreview = "#" + questionObj.questionPreviewId;
            C("Div q preview", qPreview);
            var groupName;
            if (questionObj.type == "1repListe") {
                questionObj.listItems = [''];
                groupName = "radios" + questionObj.questionId;
                C("Graphique", questionObj.graphique);
                var itemExemple1 = new Item(questionObj.questionId);
                var itemExemple2 = new Item(questionObj.questionId);
                if (questionObj.modifUser == true) {
                    $(document.body).ready(function () {
                        var idDivPrev = "#" + questionObj.questionPreviewId;
                        $(idDivPrev).find("label.control-label").html('');
                        $(idDivPrev).find("label.control-label").html(questionObj.intitule);
                    })
                }
                if (questionObj.modifUser == false) {
                    $(qPreview).remove();
                    C("ID itemExemple", itemExemple2.id, itemExemple1.id)
                    questionObj.listItems.push(itemExemple1, itemExemple2);
                    questionObj.codeHtml = "<div id= " + questionObj.questionPreviewId + " class='form-group' >" +
                        "<label class='col-md-4 control-label'>" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<select id=" + questionObj.divListItemId + " name='selectbasic' class='form-control' required>" +
                        "</div>"+
                        "</select>"+
                        "</div></fieldset>";
                    AppendPrev(questionObj);

                    $(document.body).ready(function () {
                        itemExemple1 = questionObj.listItems[1];
                        itemExemple2 = questionObj.listItems[2];
                        var idLabel1 = "#" + itemExemple1.lblId;
                        var idLabel2 = "#" + itemExemple2.lblId;
                        if (questionObj.graphique == 2) {
                            C("ENTREE GRAPH 2");
                            C(itemExemple2.lblId);
                            $(idLabel1).parent().toggleClass("checkbox", false);
                            $(idLabel1).parent().toggleClass("d-inline mr-2", true);
                            $(idLabel2).parent().toggleClass("checkbox", false);
                            $(idLabel2).parent().toggleClass("d-inline mr-2", true);

                            if (questionObj.requis == "false") {

                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }
                        if (questionObj.graphique == 1) {
                            C("Graphique", questionObj.graphique);
                            $(idLabel1).parent().toggleClass("d-inline", false);
                            $(idLabel1).parent().toggleClass("checkbox", true);
                            $(idLabel2).parent().toggleClass("d-inline", false);
                            $(idLabel2).parent().toggleClass("checkbox", true);

                            if (questionObj.requis == "false") {
                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }

                    });

                }
                else {

                }
            }
            if (questionObj.type == "Nrep") {
                questionObj.listItems = [''];
                groupName = "radios" + questionObj.questionId;
                C("Graphique", questionObj.graphique);
                var itemExemple1 = new Item(questionObj.questionId);
                var itemExemple2 = new Item(questionObj.questionId);
                if (questionObj.modifUser == true) {
                    $(document.body).ready(function () {
                        var idDivPrev = "#" + questionObj.questionPreviewId;
                        $(idDivPrev).find("label.control-label").html('');
                        $(idDivPrev).find("label.control-label").html(questionObj.intitule);
                    })
                }
                if (questionObj.modifUser == false) {
                    $(qPreview).remove();
                    C("ID itemExemple", itemExemple2.id, itemExemple1.id)
                    questionObj.listItems.push(itemExemple1, itemExemple2);
                    questionObj.codeHtml = "<div id= " + questionObj.questionPreviewId + " class='form-group' > <fieldset id=" + groupName + ">" +
                        "<label class='col-md-4 control-label' for=" + itemExemple1.groupName + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<div id=" + questionObj.divListItemId +">" +
                        "<div class='exemplechk'>" +
                        "<div class='checkbox'>" +
                        "<label class='checkbox' id=" + itemExemple1.lblId + " for=" + itemExemple1.id + ">" +
                        "<input type='checkbox' name=" + itemExemple1.groupName + " id=" + itemExemple1.id + " required>" +
                        "choix 1" +
                        "</label></div>" +
                        "<div class='checkbox'>" +
                        "<label class='checkbox' id=" + itemExemple2.lblId + " for=" + itemExemple2.id + ">" +
                        "<input type='checkbox' name=" + itemExemple2.groupName + " id=" + itemExemple2.id + ">" +
                        "choix 2" +
                        "</label></div>" +
                        "</div></div></fieldset>";
                    AppendPrev(questionObj);

                    $(document.body).ready(function () {
                        itemExemple1 = questionObj.listItems[1];
                        itemExemple2 = questionObj.listItems[2];
                        var idLabel1 = "#" + itemExemple1.lblId;
                        var idLabel2 = "#" + itemExemple2.lblId;
                        if (questionObj.graphique == 2) {
                            C("ENTREE GRAPH 2");
                            C(itemExemple2.lblId);
                            $(idLabel1).parent().toggleClass("checkbox", false);
                            $(idLabel1).parent().toggleClass("d-inline mr-2", true);
                            $(idLabel2).parent().toggleClass("checkbox", false);
                            $(idLabel2).parent().toggleClass("d-inline mr-2", true);

                            if (questionObj.requis == "false") {

                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }
                        if (questionObj.graphique == 1) {
                            C("Graphique", questionObj.graphique);
                            $(idLabel1).parent().toggleClass("d-inline", false);
                            $(idLabel1).parent().toggleClass("checkbox", true);
                            $(idLabel2).parent().toggleClass("d-inline", false);
                            $(idLabel2).parent().toggleClass("checkbox", true);

                            if (questionObj.requis == "false") {
                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }

                    });

                }
                else {

                }
            }
            if (questionObj.type == "4niv")
            {
                $(qPreview).remove();
                var item1 = new Item(questionObj.questionId);
                var item2 = new Item(questionObj.questionId);
                var item3 = new Item(questionObj.questionId);
                var item4 = new Item(questionObj.questionId);
                questionObj.listItems = [''];
                questionObj.listItems.push(item1, item2, item3, item4);
                if (questionObj.requis == "false") {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'><fieldset id=" + groupName + ">" +
                        "<label class='col-md-4 control-label' for=" + item1.groupName + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'><div class='radio'>" +
                        "<label for=" + item1.id + ">" +
                        "<input type='radio' name=" + item1.groupName + " id=" + item1.id + " value='1'>" +
                        "peu satisfait" +
                        "</label></div>" +
                        "<div class='radio'>"+
                        "<label for=" + item2.itemId + ">" +
                        "<input type='radio' name=" + item2.groupName + " id=" + item2.id + " value='2'>" +
                        "moyennement satisfait" +
                        "</label></div>" +
                        "<div class='radio'>" +
                        "<label for=" + item3.itemId + ">" +
                        "<input type='radio' name=" + item3.groupName + " id=" + item3.id + " value='3'>" +
                        "satisfait" +
                        "</label></div>" +
                        "<div class='radio'>"+
                        "<label for=" + item4.itemId + ">" +
                        "<input type='radio' name=" + item4.groupName + " id=" + item4.id + " value='4'>" +
                        "très satisfait" +
                        "</label></div></div></fieldset></div>"
                }
                else {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'><fieldset id=" + groupName + ">" +
                        "<label class='col-md-4 control-label' for=" + item1.groupName + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'><div class='radio'>" +
                        "<label for=" + item1.id + ">" +
                        "<input type='radio' name=" + item1.groupName + " id=" + item1.id + " value='1' required>" +
                        "peu satisfait" +
                        "</label></div>" +
                        "<div class='radio'>" +
                        "<label for=" + item2.itemId + ">" +
                        "<input type='radio' name=" + item2.groupName + " id=" + item2.id + " value='2'>" +
                        "moyennement satisfait" +
                        "</label></div>" +
                        "<div class='radio'>" +
                        "<label for=" + item3.itemId + ">" +
                        "<input type='radio' name=" + item3.groupName + " id=" + item3.id + " value='3'>" +
                        "satisfait" +
                        "</label></div>" +
                        "<div class='radio'>" +
                        "<label for=" + item4.itemId + ">" +
                        "<input type='radio' name=" + item4.groupName + " id=" + item4.id + " value='4'>" +
                        "très satisfait" +
                        "</label></div></div></fieldset></div>"

                }
                AppendPrev(questionObj);
            }
            if (questionObj.type == "ValNum") {
                $(qPreview).remove();
                var itemTxtC = new Item();
                itemTxtC.id = "TxtC" + codeQuestion;
                var inputId = "#" + itemTxtC.id;
                questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                    "<label class='col-md-4 control-label' for=" + itemTxtC.id + ">" + questionObj.intitule +
                    "<input id =" + itemTxtC.id + " type ='number' class='form-control input-md' required>" +
                    "</label ></div >";
                AppendPrev(questionObj);
                $(document.body).on(function () {
                    if (questionObj.requis == "false") {
                        $(inputId).prop('required', false);
                    }
                    else {
                        $(inputId).prop('required', true);
                    }
                });
            }
            if (questionObj.type == "1rep") {
                questionObj.listItems = [''];
                groupName = "radios" + questionObj.questionId;
                C("Graphique", questionObj.graphique);
                var itemExemple1 = new Item(questionObj.questionId);
                var itemExemple2 = new Item(questionObj.questionId);
                if (questionObj.modifUser == true) {
                    $(document.body).ready(function () {
                        var idDivPrev = "#" + questionObj.questionPreviewId;
                        $(idDivPrev).find("label.control-label").html('');
                        $(idDivPrev).find("label.control-label").html(questionObj.intitule);
                    })
                }
                if (questionObj.modifUser == false) {
                    $(qPreview).remove();
                    C("ID itemExemple", itemExemple2.id, itemExemple1.id)
                    questionObj.listItems.push(itemExemple1, itemExemple2);
                    questionObj.codeHtml = "<div id= " + questionObj.questionPreviewId + " class='form-group' > <fieldset id=" + groupName + ">" +
                        "<label class='col-md-4 control-label' for=" + itemExemple1.groupName + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<div id=" + questionObj.divListItemId +">" +
                        "<div class='exemple'>" +
                        "<div class='radio'>" +
                        "<label class='radio' id=" + itemExemple1.lblId + " for=" + itemExemple1.id + ">" +
                        "<input type='radio' name=" + itemExemple1.groupName + " id=" + itemExemple1.id + " required>" +
                        "choix 1" +
                        "</label></div>" +
                        "<div class='radio'>" +
                        "<label class='radio' id=" + itemExemple2.lblId + " for=" + itemExemple2.id + ">" +
                        "<input type='radio' name=" + itemExemple2.groupName + " id=" + itemExemple2.id + ">" +
                        "choix 2" +
                        "</label></div>" +
                        "</div></div></fieldset>";
                    AppendPrev(questionObj);

                    $(document.body).ready(function () {
                        itemExemple1 = questionObj.listItems[1];
                        itemExemple2 = questionObj.listItems[2];
                        var idLabel1 = "#" + itemExemple1.lblId;
                        var idLabel2 = "#" + itemExemple2.lblId;
                        if (questionObj.graphique == 2) {
                            C("ENTREE GRAPH 2");
                            C(itemExemple2.lblId);
                            $(idLabel1).parent().toggleClass("radio", false);
                            $(idLabel1).parent().toggleClass("d-inline mr-2", true);
                            $(idLabel2).parent().toggleClass("radio", false);
                            $(idLabel2).parent().toggleClass("d-inline mr-2", true);

                            if (questionObj.requis == "false") {

                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }
                        if (questionObj.graphique == 1) {
                            C("Graphique", questionObj.graphique);
                            $(idLabel1).parent().toggleClass("d-inline", false);
                            $(idLabel1).parent().toggleClass("radio", true);
                            $(idLabel2).parent().toggleClass("d-inline", false);
                            $(idLabel2).parent().toggleClass("radio", true);

                            if (questionObj.requis == "false") {
                                $(idLabel1).children().prop('required', false);
                            }
                            else {
                                $(idLabel1).children().prop('required', true);
                            }
                        }

                    });

                }
            }
            if (questionObj.type == "TxtL") {
                $(qPreview).remove();
                var itemTxtL = new Item();
                itemTxtL.id = "TxtL" + codeQuestion;
                if (questionObj.requis == "false") {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class= control-label col-md-4' for=" + itemTxtL.itemId + ">" + questionObj.intitule +
                        "<textarea  id =" + itemTxtL.id + " rows='3' class='form-control'></textarea>" +
                        "</label >" +
                        "</div >"
                }
                else {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class=' control-label col-md-4' for=" + itemTxtL.id + ">" + questionObj.intitule +
                        "<textarea id =" + itemTxtL.id + " rows='3' class='form-control' required></textarea>" +
                        "</label ></div >"
                }
                AppendPrev(questionObj);
            }
            if (questionObj.type == "TxtC") {
                $(qPreview).remove();
                var itemTxtC = new Item();
                itemTxtC.id = "TxtC" + codeQuestion;
                if (questionObj.requis == "false") {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + itemTxtC.id + ">" + questionObj.intitule +
                        "<input id =" + itemTxtC.id + " name ='textinput' type ='text' class='form-control input-md'>" +
                        "</label ></div >"
                }
                else {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + itemTxtC.id + ">" + questionObj.intitule +
                        "<input id =" + itemTxtC.id + " type ='text' class='form-control input-md' required>" +
                        "</label ></div >"
                }
                AppendPrev(questionObj);
            }
            if (questionObj.type == "OuiNon") {
                $(qPreview).remove();
                let itemOui = new Item(questionObj.questionId);
                let itemNon = new Item(questionObj.questionId);
                C("if ouiNon preview");
                itemOui.id = "Oui" + questionObj.questionId + String(Math.floor((Math.random() * 100) + 1));
                itemOui.itemName = questionObj.questionId+"-radio" ;
                itemNon.id = "Non" + questionObj.questionId + String(Math.floor((Math.random() * 100) + 1));
                itemNon.itemName = questionObj.questionId + "-radio";
                questionObj.listItems = [''];
                questionObj.listItems.push(itemNon);
                questionObj.listItems.push(itemOui);
                C("avant le if", questionObj.graphique);
                if (questionObj.graphique == 2) {
                    C("graph = 2");
                    questionObj.codeHtml = "<div class='tab'><div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + questionObj.questionId + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<label class='radio-inline mr-2' for=" + itemOui.itemId + ">" +
                        "<input type='radio' name=" + itemOui.itemName + " id=" + itemOui.id + " value='1' required>" +
                        "Oui" +
                        "</label>" +
                        "<label class='radio-inline mr-2' for=" + itemNon.itemId + ">" +
                        "<input type='radio' name=" + itemNon.itemName + " id=" + itemNon.id + " value='2'>" +
                        "Non" +
                        "</label>" +
                        "</div>" +
                        "</div></div>";
                    AppendPrev(questionObj);
                    $(document.body).ready(function () {
                        if (questionObj.requis == "false") {
                            var itemId = "#" + itemOui.id;
                            C(itemId);
                            $(itemId).prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            var itemId = "#" + itemOui.id;
                            $(itemId).prop('required', true);
                        }
                    });
                }
                else if (questionObj.graphique = 1) {
                    C("graph = 1");
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + questionObj.questionId + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<div class='radio'>" +
                        "<label for=" + itemOui.id + ">" +
                        "<input type='radio' name=" + itemOui.itemName + " id=" + itemOui.id + " value='1' checked='checked' required>" +
                        "Oui" +
                        "</label>" +
                        "</div>" +
                        "<div class='radio'>" +
                        "<label for=" + itemNon.id + ">" +
                        "<input type='radio' name=" + itemNon.itemName + " id=" + itemNon.id + " value='2'>" +
                        "Non" +
                        "</label>" +
                        "</div>" +
                        "</div>" +
                        "</div>";
                    AppendPrev(questionObj);
                    $(document.body).ready(function () {
                        if (questionObj.requis == "false") {
                            var itemId = "#" + itemOui.id;
                            C(itemId);
                            $(itemId).prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            var itemId = "#" + itemOui.id;
                            $(itemId).prop('required', true);
                        }
                    });
                }
            }
            if (questionObj.type == "OuiNonNsp")
            {
                $(qPreview).remove();
                let itemOui = new Item(questionObj.questionId);
                let itemNon = new Item(questionObj.questionId);
                var itemNeSaisPas = new Item(questionObj.questionId);
                itemOui.id = "Oui" + questionObj.questionId;
                itemOui.itemName = questionObj.questionId + "-radio";
                itemNon.id = "Non" + questionObj.questionId;
                itemNon.itemName = questionObj.questionId + "-radio" ;
                itemNeSaisPas.id = "NeSaisPas" + questionObj.questionId;
                itemNeSaisPas.itemName = questionObj.questionId + "-radio";
                if (questionObj.graphique == 2) {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + questionObj.questionId + ">" + questionObj.intitule +"</label>" +
                        "<div class='col-md-4'>" +
                        "<label class='radio-inline mr-2' for=" + itemOui.id + ">" +
                        "<input type='radio' name=" + itemOui.itemName + " id=" + itemOui.id + " value='1' required>" +
                        "Oui" +
                        "</label>" +
                        "<label class='radio-inline mr-2' for=" + itemNon.id + ">" +
                        "<input type='radio' name=" + itemNon.itemName + " id=" + itemNon.id + " value='2'>" +
                        "Non" +
                        "</label>" +
                        "<label class='radio-inline' for=" + itemNeSaisPas.id + ">" +
                        "<input type='radio' name=" + itemNeSaisPas.itemName + " id=" + itemNeSaisPas.id + " value='2'>" +
                        "Ne sais pas" +
                        "</label>" +
                        "</div>" +
                        "</div>";
                    AppendPrev(questionObj);
                    $(document.body).ready(function () {
                        if (questionObj.requis == "false") {
                            var itemId = "#" + itemNon.id;
                            $(itemId).prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            var itemId = "#" + itemNon.id;
                            $(itemId).prop('required', true);
                        }
                    });
                }
                else if (questionObj.graphique == 1) {
                    questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'>" +
                        "<label class='col-md-4 control-label' for=" + itemOui.id + ">" + questionObj.intitule + "</label>" +
                        "<div class='col-md-4'>" +
                        "<div class='radio'>"+
                        "<label for=" + itemOui.id + ">" +
                        "<input type='radio' name=" + itemOui.itemName + " id=" + itemOui.id + " value='1' checked='checked' required>" +
                        "Oui" +
                        "</label>" +
                        "</div>" +
                        "<div class='radio'>" +
                        "<label for=" + itemNon.id + ">" +
                        "<input type='radio' name=" + itemNon.itemName + " id=" + itemNon.id + " value='2'>" +
                        "Non" +
                        "</label>" +
                        "</div>" +
                        "<div class='radio'>" +
                        "<label for=" + itemNeSaisPas.id + ">" +
                        "<input type='radio' name=" + itemNeSaisPas.itemName + " id=" + itemNeSaisPas.id + " value='2'>" +
                        "Ne sais pas" +
                        "</label>" +
                        "</div>" +
                        "</div>" +
                        "</div>";
                    AppendPrev(questionObj);
                    $(document.body).ready(function () {
                        if (questionObj.requis == "false") {
                            var itemId = "#" + itemNon.id;
                            $(itemId).prop('required', false);
                        }
                        if (questionObj.requis == "true") {
                            var itemId = "#" + itemNon.id;
                            $(itemId).prop('required', true);
                        }
                    });
                }
            }
            if (questionObj.type == "1a10")
            {
                $(qPreview).remove();
                var item1 = new Item(questionObj.questionId);
                var item2 = new Item(questionObj.questionId);
                var item3 = new Item(questionObj.questionId);
                var item4 = new Item(questionObj.questionId);
                var item5 = new Item(questionObj.questionId);
                var item6 = new Item(questionObj.questionId);
                var item7 = new Item(questionObj.questionId);
                var item8 = new Item(questionObj.questionId);
                var item9 = new Item(questionObj.questionId);
                var item10 = new Item(questionObj.questionId);
                groupName = "radios" + questionObj.questionId;
                questionObj.listItems = [''];
                questionObj.listItems.push(item1, item2, item3, item4, item5, item6, item7, item8, item9, item10);
                C(questionObj.listItems);
                C(questionObj.requis);
                var radioId = "#" + item1.id;
                questionObj.codeHtml = "<div id=" + questionObj.questionPreviewId + " class='form-group'><fieldset id=" + groupName + ">" +
                    "<label class='col-md-4 control-label' for=" + groupName + ">" + questionObj.intitule + "</label>" +
                    "<div class='col-md-4'>" +
                    "<div class='radio'>" +
                    "<label for=" + item1.id + ">" +
                    "<input type='radio' name=" + item1.groupName + " id=" + item1.id + " value='1' required>" +
                    "1" +
                    "</label></div>" +
                    "<label for=" + item2.id + ">" +
                    "<div class='radio'>" +
                    "<input type='radio' name=" + item2.groupName + " id=" + item2.id + " value='2'>" +
                    "2" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item3.id + ">" +
                    "<input type='radio' name=" + item3.groupName + " id=" + item3.id + " value='3'>" +
                    "3" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item4.id + ">" +
                    "<input type='radio' name=" + item4.groupName + " id=" + item4.id + " value='4'>" +
                    "4" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item5.id + ">" +
                    "<input type='radio' name=" + item5.groupName + " id=" + item5.id + " value='5'>" +
                    "5" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item6.id + ">" +
                    "<input type='radio' name=" + item6.groupName + " id=" + item6.id + " value='6'>" +
                    "6" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item7.id + ">" +
                    "<input type='radio' name=" + item7.groupName + " id=" + item7.id + " value='7'>" +
                    "7" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item8.id + ">" +
                    "<input type='radio' name=" + item8.groupName + " id=" + item8.id + " value='8'>" +
                    "8" +
                    "</label></div>" +
                    "<div class='radio'>" +
                    "<label for=" + item9.id + ">" +
                    "<input type='radio' name=" + item9.groupName + " id=" + item9.id + " value='9'>" +
                    "9" +
                    "</label></div>" +
                    "<label class='radio-inline mr-2' for=" + item10.id + ">" +
                    "<input type='radio' name=" + item10.groupName + " id=" + item10.id + " value='10'>" +
                    "10" +
                    "</label></div></div></fieldset></div>";
                AppendPrev(questionObj);
                $(document.body).ready(function () {
                    if (questionObj.requis == "false") {
                        $(radioId).prop('required', false);
                    }
                    else {
                        $(radioId).prop('required', true);
                    }
                });


            }
        }
        // Crée l'aperçu de la question
        function AppendPrev(questionObj) {
            //if (true) {
            //    AjouterQuestionCookie(questionObj);
            //}
            var divPosPrevId = "#" + questionObj.divPosPrev;
            C("avant append")
            C("Id de la balise de position", divPosPrevId);
            C($(divPosPrevId).children().length);
            C($(divPosPrevId));

            $(document.body).ready(function () {
                if ($(divPosPrevId).length == 0) {
                    C("la balise de position n'existe pas.");
                    let code = "<div id=" + questionObj.divPosPrev + ">" + questionObj.codeHtml + "</div>";
                    C(code);
                    $("#previewQuestions").append(code);
                    return;
                }
                else if ($(divPosPrevId).length != 0) {
                    C("la balise de position existe.");
                    $(divPosPrevId).append(questionObj.codeHtml);
                }

            });
        }

        function filter_array_values(arr) {
            arr = arr.filter(isEligible);
            return arr;
        }
        function isEligible(value) {
            if (value !== false || value !== null || value !== 0 || value !== "") {
                return value;
            }
        }
        function getQuestionnaire(id) {

        }
        function SetCookieQuestionnaire(questionnaire) {
            if (document.cookie) {
                document.cookie = "Questionnaire=;expires=Thu, 01 Jan 1970 00: 00: 00 UTC; path=/";
            }
            let questionnaireJson = JSON.stringify(questionnaire);
            C("Cookie quest json :",questionnaireJson);
            document.cookie = "Questionnaire="+ questionnaireJson + ";expires=10; path=/";
            C(document.cookie);
        }
        function EnregistrerQuestionnaire(questionnaire) {
            let questionnaireJson = JSON.stringify(questionnaire);
            C(questionnaireJson);
        $.ajax({
                url: '@Url.Action("CreerQuestionnaire", "OPS")',
            data: { "data": questionnaireJson },
                type: 'POST',
            dataType: 'application/json',
                success: function (response) {
                    if (response.data != null) {

                    }
                    else {

                    }
                },
                error: function (xhr, status, error) {

                }
        });

        }
        function AddQuestionObj(questionObj) {
            let QuestionObjJson = JSON.stringify(questionObj);
        $.ajax({
                url: '@Url.Action("AddQuestionObj", "OPS")',
            data: { "query": QuestionObjJson },
                type: 'POST',
            dataType: 'application/json',
                success: function (response) {
                    if (response.data != null) {

                    }
                    else {

                    }
                },
                error: function (xhr, status, error) {

                }
        });

        }
        function GetQuestionObj(codeQuestion) {
            $.ajax({
                url: '@Url.Action("GetQuestionObj", "OPS")',
                data: { "query": codeQuestion },
                type: 'POST',
            dataType: 'application/json',
                success: function (response) {
                    if (response.data != null) {
                        questionObj = response.data;
                    }
                    else {

                    }
                },
                error: function (xhr, status, error) {

                }
            });
        }
        function MakeQuestionObj() {
            class QuestionObj {
                constructor() {
                    this.type = '';
                    this.sousType = '';
                    this.choixRequis = '';
                    this.questionId = null;
                    this.intitule = '';
                    this.dataTarget = '';
                    this.TargetId = '';
                    this.intituleTxtBId = '';
                    this.intituleDivBId = '';
                    this.requisOuiRadioId = '';
                    this.requisNonRadioId = '';
                    this.requisRadioName = '';
                    this.requis = '';
                    this.ddlId = '';
                    this.ajoutSupprChoix = '';
                    this.ajouterBtnId = '';
                    this.supprBtnId = '';
                    this.trashBtnId = '';
                    this.graphique = '';
                    this.graphiqueLigneId = '';
                    this.graphiqueColId = '';
                    this.codeHtml = '';
                    this.questionPreviewId = '';
                    this.listItems = [''];
                }
            }
            return QuestionObj;
        }
        // Objets de l'interface
        function QuestionObj(type, choixRequis, ajoutSupprChoix, intitule, codeQuestion, numQ) {
            this.numQ = numQ;
            this.type = type;
            this.sousType = '';
            this.choixRequis = choixRequis;
            this.questionId = codeQuestion;
            this.intitule = intitule;
            this.dataTarget = "#quest" + codeQuestion + "Param";
            this.targetId = "quest" + codeQuestion + "Param";
            this.intituleTxtBId = "intitule" + codeQuestion + "TxtB";
            this.intituleDivBId = "intitule" + codeQuestion + "Div";
            this.requisOuiRadioId = "reqOui" + codeQuestion + "Radio";
            this.requisNonRadioId = "reqNon" + codeQuestion + "Radio";
            this.requisRadioName = "ouiNon" + codeQuestion;
            this.requis = '';
            this.ddlId = "item" + codeQuestion + "Ddl";
            this.ajoutSupprChoix = ajoutSupprChoix;
            this.ajouterBtnId = "ajouter" + codeQuestion + "Btn";
            this.supprBtnId = "suppr" + codeQuestion + "Btn";
            this.trashIconId = "trash" + codeQuestion + "Icon";
            this.graphique = 1;
            this.graphiqueId = "graph" + codeQuestion + "div";
            this.questionPreviewId = "questionPreview" + codeQuestion;
            this.graphiqueLigneId = '';
            this.graphiqueColId = '';
            this.codeHtml = '';
            this.divPosPrev = "posPrev" + codeQuestion;
            this.itemUlId = "item" + codeQuestion + "Ul";
            this.itemLiId = "item" + codeQuestion;
            this.modifUser = false;
            this.divListItemId = "listItem" + codeQuestion;
            this.listItems = [''];
            this.listUserItems = [''];
        }
        function Item(codeQuestion) {
            this.id = codeQuestion + "Item" + String(Math.floor((Math.random() * 1000) + 1));
            this.lbl = '';
            this.lblId = codeQuestion + "Item" + String(Math.floor((Math.random() * 1000) + 1))
            this.name = '';
            this.intitule = '';
            this.groupName = "radios" + codeQuestion;
            this.codeHtml = '';
        }
        function UserItem(codeQuestion) {
            this.id = codeQuestion + "userItem" +  String(Math.floor((Math.random() * 100) + 1));
            this.idPreview = "itemPrev"+ codeQuestion  + String(Math.floor((Math.random() * 1000) + 1));
            this.type = '';
            this.fakeId = 1;
            this.txtBId = "intituleItem" + codeQuestion + "TxtB" + String(Math.floor((Math.random() * 1000) + 1));
            this.ulId = '';
            this.intitule = '';
            this.codeHtml = '';
            this.name = '';
            this.itemPrev = {};
        }
        // Fonction d'extraction de l' id de la question en utilisant en entrée un id d'un élément du dom
        function ExtraireCodeQuestion(Id = '') {

        if (Id.match(/(\d+)/)) {
            var code = '';
            code = Id.match(/(\d+)/);
            return code[0];
        }
        else {

            return false;
        }
        }


    });
    //$(function () {
    //    $('#sortable').sortable({
    //        update: function (event, ui) {
    //            var productOrder = $(this).sortable('toArray').toString();
    //            $("#ordre").text(productOrder);
    //        }
    //    });
    //});

    //$('.drag').draggable({
    //    containment: '#limitation',
    //    snap: '.draggable',
    //    revert: true
    //});
    //$('.drop').droppable();





</script>
